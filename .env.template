# .env.template for ctd-pa-transformations-for-discovery
# Copy to .env and fill values for local development

# Paths (local development only)
# Directory containing trigger XML files (default repo/data/triggers)
CTD_DATA_INPUT=
# Intermediate directory for writing debug JSONs (local only)
CTD_DATA_INTERMEDIATE=
# Output directory for local saved tarballs / json outputs
CTD_DATA_OUTPUT=
# Local trigger JSON (used when running locally without AWS infrastructure)
CTD_TRIGGER_JSON=trigger.json

# Runtime / modes
# one of: local, local_s3, remote_s3
RUN_MODE=local_s3
# When in local_s3, set an AWS profile name to use for S3 access
AWS_PROFILE=

# S3 behaviour
# Prefix (key) under which transformed outputs are written
S3_OUTPUT_DIR=json_outputs
# Create a subfolder per catalogue level when True
S3_USE_LEVEL_SUBFOLDERS=true
# When TEST_MODE=true, S3_TEST_FOLDER will be prefixed to input/output keys
TEST_MODE=false
S3_TEST_FOLDER=testing

# Logging / debugging
CTD_LOG_LEVEL=INFO
PROGRESS_VERBOSE=false
# Flag to save intermediate JSON files when running locally
DEBUG_TRANSFORMERS=true
SAVE_INTERMEDIATE_JSON=true

# Transformation configuration: either a JSON string or a path to a JSON file
# Example: set to a JSON object string or to a file path like data/trans_config.json
TRANS_CONFIG=

# Transfer register filename (used in S3 modes)
TRANSFER_REGISTER_FILENAME=uploaded_records_transfer_register.json

# Replica (digitised) metadata prefixes used for replica handling
REPLICA_METADATA_PREFIX=metadata
REPLICA_FILENAME_PREFIX=files

# Filtering options
# Comma-free IAID string to filter processing when running locally
FILTER_IAID=
# When true and replica metadata exists for a record, those records are written into separate "_digitised" tarballs
FILTER_REPLICA_METADATA=false

# References and exclusions (S3 key or local file under data/references)
# Valid/definitive department codes JSON under references/
VALID_DEPT_CODES_KEY=references/valid_dept_codes.json
# Optional bucket override for references (if different from ingest/source bucket)
VALID_DEPT_CODES_BUCKET=
# Y-naming exclusion patterns file (list/dict) under references/
YNAMING_EXCLUSIONS_KEY=references/ynaming_exclusions.json

# BFI exclusion code (string) - records with heldBy[0].xReferenceCode equal to this value will be saved separately and skipped
BFI_EXCLUSION_CODE=

# Misc
# Base filename used when running locally
FILE=